"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[278],{278:function(e,n,l){l.r(n),l.d(n,{default:function(){return U}});var r=l(3433),i=l(9439),a=l(4554),t=l(1889),c=l(2791),u=l(7762),s="black",o=[[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,"white-piece","black-piece",null,null,null],[null,null,null,"black-piece","white-piece",null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null]],d=j(x(o,s)),h=Z(o);function v(e,n){return e>=0&&e<8&&n>=0&&n<8}function f(e,n,l,r,a){var t="".concat(r,"-piece"),c="".concat(function(e){return"black"===e?"white":"black"}(r),"-piece"),u=[];return[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]].forEach((function(r){var s=(0,i.Z)(r,2),o=s[0],d=s[1],h=[],f=n+o,p=l+d;if(v(f,p)&&e[f][p]===c)for(;v(f,p);){var x=e[f][p];if(x===c)h.push([f,p]);else{if(null===x)break;if(x===t){if(u.push.apply(u,h),a)return[u];break}}f+=o,p+=d}})),u}var p=function(e,n,l,r){var a=JSON.parse(JSON.stringify(e));return function(e,n,l,r){e[l][r]="".concat(n,"-piece")}(a,n,l,r),function(e,n,l,r){f(e,l,r,n).forEach((function(l){var r=(0,i.Z)(l,2),a=r[0],t=r[1];e[a][t]="".concat(n,"-piece")}))}(a,n,l,r),a};function x(e,n){var l=[];return e.forEach((function(r,i){r.forEach((function(r,a){null===r&&(f(e,i,a,n,!0).length>0&&l.push([i,a]))}))})),l}var m=function(e,n){var l=e.every((function(e){return e.every((function(e){return null!==e}))})),r=0===n.length;return!(!l&&!r)};function Z(e){var n={black:0,white:0};return e.forEach((function(e){e.forEach((function(e){"black-piece"===e?n.black++:"white-piece"===e&&n.white++}))})),n}function j(e){var n=(0,r.Z)(Array(8)).map((function(e){return(0,r.Z)(Array(8)).map((function(e){return!1}))}));return e.forEach((function(e){var l=(0,i.Z)(e,2),r=l[0],a=l[1];return n[r][a]=!0})),n}function b(e,n,l,r,i){var a=null;if(a=x(e,i?"black":"white"),0===n||m(e,a)){var t=function(e){var n=Z(e);return n.black-n.white}(e);return t}if(i){var c,s=-1/0,o=(0,u.Z)(a);try{for(o.s();!(c=o.n()).done;){var d=c.value,h=b(p(e,"black",d[0],d[1]),n-1,l,r,!1);if(s=Math.max(s,h),r<=(l=Math.max(l,h)))break}}catch(w){o.e(w)}finally{o.f()}return s}var v,f=1/0,j=(0,u.Z)(a);try{for(j.s();!(v=j.n()).done;){var y=v.value,k=b(p(e,"white",y[0],y[1]),n-1,l,r,!0);if(f=Math.min(f,k),(r=Math.min(r,k))<=l)break}}catch(w){j.e(w)}finally{j.f()}return f}var y=l(184),k=function(e){var n=e.piece,l=e.handleClick,r=e.isValidMove,i=e.isPreviousAction;return(0,y.jsx)("div",{className:"reversi-square ".concat(i?"reversi-previous-move":""," ").concat(r?"reversi-valid-move":""),onClick:l,children:n&&(0,y.jsx)("div",{className:"reversi-piece reversi-".concat(n)})})},w=function(e){var n=e.board,l=e.validBoard,r=e.handleClick,i=e.previousAction;return(0,y.jsx)("div",{className:"board",children:n.map((function(e,n){return(0,y.jsx)("div",{children:e.map((function(e,a){return(0,y.jsx)(k,{piece:e,handleClick:function(){return r(n,a)},isValidMove:l[n][a],isPreviousAction:i&&n===i.row&&a===i.col},a)}))},n)}))})},g=l(890),S=l(9369);var C=function(e){var n=e.player,l=e.piecesNumber;return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(S.Z,{flexDirection:"row",gap:10,mb:1,children:[(0,y.jsx)("div",{className:"reversi-piece reversi-black-piece",children:(0,y.jsx)(g.Z,{color:"white",variant:"h6",children:l.black})}),(0,y.jsxs)(S.Z,{flexDirection:"row",children:[(0,y.jsx)(g.Z,{variant:"h5",children:"Turns:"}),(0,y.jsx)("span",{className:"reversi-piece reversi-".concat(n,"-piece reversi-small")})]}),(0,y.jsx)("div",{className:"reversi-piece reversi-white-piece",children:(0,y.jsx)(g.Z,{variant:"h6",children:l.white})})]})})},D=l(5527),A=l(3400),N=l(493),E=l(5021),P=l(6278),M=l(7064),z=l(229),I=l(3579),B=l(3416),H=l(492);var G=function(e){var n=e.history,l=e.view,r=e.viewHistory;return(0,y.jsxs)(D.Z,{variant:"outlined",sx:{p:2},children:[(0,y.jsxs)(S.Z,{direction:"row",gap:2,children:[(0,y.jsx)(A.Z,{size:"small",onClick:function(){r(l+1)},disabled:l===n.length-1,children:(0,y.jsx)(B.Z,{fontSize:"small"})}),(0,y.jsx)(g.Z,{variant:"h6",children:"History"}),(0,y.jsx)(A.Z,{size:"small",onClick:function(){r(l-1)},disabled:-1===l||0===l,children:(0,y.jsx)(H.Z,{fontSize:"small"})})]}),(0,y.jsx)(N.Z,{sx:{overflow:"auto",maxHeight:300},children:n.map((function(e,n){return(0,y.jsx)(E.ZP,{disablePadding:!0,secondaryAction:n===l?(0,y.jsx)(A.Z,{size:"small",disabled:!0,children:(0,y.jsx)(I.Z,{fontSize:"small"})}):(0,y.jsx)(A.Z,{size:"small",disableRipple:!0,children:(0,y.jsx)(z.Z,{fontSize:"small"})}),children:(0,y.jsxs)(P.Z,{onClick:function(){return r(n)},selected:n===l,children:[(0,y.jsx)(M.Z,{children:(0,y.jsx)("span",{className:"reversi-piece reversi-".concat(e.action.player,"-piece reversi-tiny")})}),(0,y.jsxs)(g.Z,{variant:"subtitle",children:[e.action.row,", ",e.action.col]},n)]})},n)}))})]})},F=l(4721),J=l(3963),O=1,R=15;var V=function(e){var n=e.predict,l=e.treeDeepth,r=e.handleDeepthChange;return(0,y.jsxs)(D.Z,{variant:"outlined",sx:{width:350,p:1.5,mt:1,mb:1},children:[null!==n&&0===n.score&&(0,y.jsx)(g.Z,{children:"Prediciton: Draw"}),null!==n&&0!==n.score&&(0,y.jsxs)(g.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:["Prediciton:",(0,y.jsx)("span",{className:"reversi-tiny reversi-piece reversi-".concat(n.score>0?"black":"white","-piece")}),"win ",Math.abs(n.score)," pieces after ",n.treeDeepth," moves"]}),null!==n&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(g.Z,{children:["Running time: ",n.time/1e3," s"]}),(0,y.jsx)(F.Z,{sx:{mt:1}})]}),(0,y.jsx)(g.Z,{mt:1,children:"AI Predict Moves:"}),(0,y.jsx)(J.ZP,{valueLabelDisplay:"off",min:O,max:R,marks:[{label:l,value:l}],value:l,onChange:function(e){return r(e.target.value)}})]})},_=l(3767),q=l(6151),L=l(615),T=l(4638),W=l(9174),K=l(7122);var Q=function(e){var n=e.newGame,l=e.aiMove,r=e.history,a=e.gameState,t=e.openAdvance,u=e.toogleAdvance,s=(0,c.useState)(null),o=(0,i.Z)(s,2),d=o[0],h=o[1];return(0,y.jsxs)(_.Z,{flexDirection:"row",gap:2,sx:{mt:2,mb:1},children:[(0,y.jsx)(q.Z,{onClick:n,variant:"outlined",disabled:0===r.length,children:"New Game"}),(0,y.jsx)(q.Z,{onClick:l,variant:"outlined",color:"secondary",disabled:0===x(a.board,a.player).length,children:"AI play"}),(0,y.jsx)(A.Z,{onClick:function(e){return h(e.target)},children:(0,y.jsx)(K.Z,{})}),(0,y.jsx)(L.Z,{anchorEl:d,open:Boolean(d),onClose:function(){return h(null)},children:(0,y.jsxs)(T.Z,{onClick:function(){u(),h(null)},children:["Advance Setting ",(0,y.jsx)(W.Z,{disabled:!0,checked:t})]})})]})};var U=function(){var e=(0,c.useState)({board:o,player:s}),n=(0,i.Z)(e,2),l=n[0],u=n[1],v=(0,c.useState)(d),f=(0,i.Z)(v,2),m=f[0],k=f[1],g=(0,c.useState)(h),S=(0,i.Z)(g,2),D=S[0],A=S[1],N=(0,c.useState)([]),E=(0,i.Z)(N,2),P=E[0],M=E[1],z=(0,c.useState)(-1),I=(0,i.Z)(z,2),B=I[0],H=I[1],F=(0,c.useState)(null),J=(0,i.Z)(F,2),O=J[0],R=J[1],_=(0,c.useState)(8),q=(0,i.Z)(_,2),L=q[0],T=q[1],W=(0,c.useState)(!1),K=(0,i.Z)(W,2),U=K[0],X=K[1],Y=function(e,n,r){if(Boolean(!l.board[e][n])&&m[e][n]){var i={board:p(l.board,l.player,e,n),player:"black"===l.player?"white":"black"};r||R(null),$(i,l.player,e,n),u(i)}},$=function(e,n,l,i){var a={gameState:e,action:{player:n,row:l,col:i}};M(-1===B?[a]:[a].concat((0,r.Z)(P.slice(B)))),H(0)};return(0,c.useEffect)((function(){var e=x(l.board,l.player);k(j(e)),A(Z(l.board))}),[l]),(0,y.jsxs)(a.Z,{p:2,display:"flex",alignItems:"center",flexDirection:"column",children:[(0,y.jsx)(C,{player:l.player,piecesNumber:D}),(0,y.jsxs)(t.ZP,{container:!0,maxWidth:"sm",mt:2,children:[(0,y.jsxs)(t.ZP,{item:!0,xs:12,md:8,display:"flex",flexDirection:"column",alignItems:"center",children:[(0,y.jsx)(w,{board:l.board,validBoard:m,handleClick:Y,previousAction:-1!==B&&P[B].action}),(0,y.jsx)(Q,{newGame:function(){u({board:o,player:s}),M([]),H(-1)},aiMove:function(){var e=new Date,n=function(e,n,l){var r="black"===n,i=x(e,n),a=null;if(r){var t=-1/0;return i.forEach((function(n){var r=b(p(e,"black",n[0],n[1]),l-1,t,1/0,!1);r>t&&(a=n,t=r)})),[a,t]}var c=1/0;return i.forEach((function(n){var r=b(p(e,"white",n[0],n[1]),l-1,-1/0,c,!0);r<c&&(a=n,c=r)})),[a,c]}(l.board,l.player,L),r=(0,i.Z)(n,2),a=r[0],t=r[1],c=new Date-e;R({score:t,treeDeepth:L,time:c}),Y(a[0],a[1],!0)},openAdvance:U,toogleAdvance:function(){return X((function(e){return!e}))},history:P,gameState:l}),U&&(0,y.jsx)(V,{predict:O,treeDeepth:L,handleDeepthChange:function(e){T(e)}})]}),(0,y.jsx)(t.ZP,{item:!0,xs:12,md:4,children:(0,y.jsx)(G,{history:P,view:B,viewHistory:function(e){H(e),u(P[e].gameState)}})})]})]})}}}]);
//# sourceMappingURL=278.9cc5c866.chunk.js.map